<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 How to run the plugin | 03_run_plugin.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 How to run the plugin | 03_run_plugin.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 How to run the plugin | 03_run_plugin.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  


<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://github.com/SWS-Methodology/faoswsFbsConsolidationDocumentation">FBS</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path=""><a href="#how-to-run-the-plugin"><i class="fa fa-check"></i><b>1</b> How to run the plugin</a>
<ul>
<li class="chapter" data-level="1.1" data-path=""><a href="#on-secondary-datasets"><i class="fa fa-check"></i><b>1.1</b> On secondary datasets</a></li>
<li class="chapter" data-level="1.2" data-path=""><a href="#flowchart"><i class="fa fa-check"></i><b>1.2</b> Flowchart</a></li>
<li class="chapter" data-level="1.3" data-path=""><a href="#step-by-step-guide"><i class="fa fa-check"></i><b>1.3</b> Step-by-step guide</a></li>
<li class="chapter" data-level="1.4" data-path=""><a href="#usage-examples-for-the-parameters"><i class="fa fa-check"></i><b>1.4</b> Usage examples for the parameters</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path=""><a href="#complete-dataset-runs"><i class="fa fa-check"></i><b>1.4.1</b> Complete-dataset runs</a></li>
<li class="chapter" data-level="1.4.2" data-path=""><a href="#query-based-runs"><i class="fa fa-check"></i><b>1.4.2</b> Query-based runs</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path=""><a href="#best-practices"><i class="fa fa-check"></i><b>1.5</b> Best practices</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:title:end-->
<!--bookdown:title:start-->
<div id="how-to-run-the-plugin" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> How to run the plugin<a href="#how-to-run-the-plugin" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="on-secondary-datasets" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> On secondary datasets<a href="#on-secondary-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Long story short.</strong> The fbs_consolidation plugin has two additional input parameters: <em>Secondary Dataset 1</em> and <em>Secondary Dataset 2</em>. You can create a dummy session for each output dataset and select these sessions as values for the two <em>Secondary Dataset</em> parameters. The only exception is the parameter’s value for the “other” output dataset when <em>Update both output datasets</em> is set to <em>Yes</em>: in this case, select the session where you want to save your results.</p>
<p>The longer, technical explanation is detailed in the remainder of this section.</p>
<p>The plugin can be run from either output dataset. It needs to read from and write to the selected output dataset and, potentially, to the “other” one. To make this possible, both output datasets must be set as <em>primary</em> and <em>secondary</em> datasets for the plugin - otherwise, the “other” output dataset would not be accessible. Figure <a href="#fig:secondaryAdmin">1.1</a> shows how this is configured for the fbs_consolidation plugin in the SWS Admin console.</p>
<div class="float">
<img src="images/fbs_secondary_admin.png" alt=" Figure 3.1. Attributes section of the General tab of the fbs_consolidation plugin in the SWS Admin console." />
<div class="figcaption"> Figure 3.1. <em>Attributes</em> section of the <em>General</em> tab of the fbs_consolidation plugin in the SWS Admin console.</div>
</div>
<p><br />
As a result, the plugin has two new input parameters placed before the standard ones, as shown in Figure <a href="#fig:secondaryLaunch">1.2</a>. The output datasets are listed in the same order under both <em>Datasets</em> and <em>Secondary Datasets</em> (refer again to Figure <a href="#fig:secondaryAdmin">1.1</a>). This ensures the input parameters always have the same meaning, regardless of which output dataset the plugin is run from:<br />
- <em>Secondary Dataset 1</em> always refers to <em>FBS Consolidated</em>.<br />
- <em>Secondary Dataset 2</em> always refers to <em>FBS SOFI</em>.</p>
<div class="float">
<img src="images/fbs_secondary_launch.png" alt=" Figure 3.2. First input parameters’ selection for the fbs_consolidation plugin." />
<div class="figcaption"> Figure 3.2. First input parameters’ selection for the fbs_consolidation plugin.</div>
</div>
<p><br />
These additional input parameters make running the plugin slightly more complex, especially since fbs_consolidation is not a core plugin. Non-core plugins always require selecting a dataset/session for each secondary dataset - they cannot be run otherwise.</p>
<p>By default (see Figure <a href="#fig:secondaryLaunch">1.2</a>), the first two input parameters are pre-selected to point to the dataset itself. However, non-core plugins cannot save to datasets directly. This is particularly important for the “other” output dataset: if you leave the value of its <em>Secondary Dataset</em> parameter set to the dataset itself (e.g., if you run from <em>FBS SOFI</em> and leave <em>FBS Consolidated</em> as <em>Secondary Dataset 1</em>), the plugin can be launched but will return an error like the one in Figure <a href="#fig:secondaryError">1.3</a>.</p>
<div class="float">
<img src="images/fbs_secondary_error.png" alt=" Figure 3.3. Example of error produced by launching a non-core plugin from a session but selecting a dataset as a value for a Secondary Dataset input parameter." />
<div class="figcaption"> Figure 3.3. Example of error produced by launching a non-core plugin from a session but selecting a dataset as a value for a <em>Secondary Dataset</em> input parameter.</div>
</div>
<p><br />
Therefore, even though <em>Secondary Datasets</em> input parameters allow you to select either the dataset or any available session, not all options are valid. Consider this example where the plugin has two output datasets, A and B, and you run it from A:<br />
- The dataset/session selection for A is redundant because the plugin will always save data back to the session it is run from. Choosing dataset A will not cause any issues but serves no purpose.<br />
- The dataset/session selection for B is redundant if <em>Update both output datasets</em> is set to <em>No</em>. However, if dataset B is selected from the dropdown list, the plugin will fail because it is not a core plugin (see Figure <a href="#fig:secondaryError">1.3</a>).<br />
- The only way to save data for dataset B is to select a valid session. The plugin will then save data for B into that session.<br />
</p>
<p>To simplify things, you can:<br />
1. Create a dummy session for each output dataset.<br />
2. Select those sessions as values for the two <em>Secondary Datasets</em> input parameters. Always do this, except for the “other” output dataset when <em>Update both output datasets</em> is set to <em>Yes</em>; in this case, choose the session where you want to save your results.</p>
</div>
<div id="flowchart" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Flowchart<a href="#flowchart" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This quick operational guide is intended for users who are already familiar with the FBS consolidation process and understand the key parameters and settings required to run the plugin effectively. You can think of this as a guide on how to navigate the SWS environment to run the plugin—assuming you already know what the plugin does. If you are unsure about the workflow or how the plugin operates, we recommend reviewing the diagram in the next section first.</p>
</div>
<div id="step-by-step-guide" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Step-by-step guide<a href="#step-by-step-guide" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section provides a step-by-step guide on how to run the fbs_consolidation plugin. The instructions refer to the new SWS UI but can be easily adapted for the legacy interface as well.</p>
<p>This quick operational guide shows how to navigate the SWS environment to run the plugin. It is intended for users who are already familiar with the FBS consolidation process and understand the key parameters and settings required to run the plugin effectively.</p>
<p>The steps needed to run the plugin are the following.</p>
<ol style="list-style-type: decimal">
<li>Open the SWS new UI.
<img src="images/fbs_guide1.png" /></li>
<li>Create a new SWS session by clicking the <em>New query</em> button. You can choose one of the following options:
<ul>
<li>[Domain: Disseminated Datasets] and [Dataset: FBS Consolidated] to update the <em>FBS Consolidated</em> dataset or both output datasets.
<img src="images/fbs_guide2.png" /></li>
<li>[Domain: Food Security] and [Dataset: FBS SOFI] to update the <em>FBS SOFI</em> dataset or both output datasets.
<img src="images/fbs_guide2bis.png" /></li>
</ul></li>
<li>Select at least one key for each dimension. Then, click <em>Save as session</em>.
<div class="note">
The selected key combination is relevant only if the <em>Limit import to query</em> input parameter is set to <em>Yes</em>.
</div>
<img src="images/fbs_guide3.png" /></li>
<li>A pop-up window will appear. Provide a clear, descriptive name for your session and click <em>Create session</em>.
<div class="tip">
Using meaningful session names helps with tracking and managing your work.
</div>
<img src="images/fbs_guide4.png" /></li>
<li>Click on <em>Run plugin</em>.
<img src="images/fbs_guide5.png" /></li>
<li>In the pop-up window, leave <em>Target</em> set to <em>Apply to session data</em> and select <em>fbs_consolidation</em> as <em>Plugin</em>. Then, click <em>Define params</em>.
<img src="images/fbs_guide6.png" /></li>
<li>Specify the first two parameters: <em>Secondary Dataset</em> 1 and 2.
<div class="note">
These two parameters are mandatory.
</div>
<div class="tip">
Unless you need to populate simultaneously both output datasets, you can use dummy sessions.
</div>
<img src="images/fbs_guide7.png" /></li>
<li>Configure the next five parameters, which are the standard input parameters for the plugin. Once they are set, click <em>Schedule</em>.
<div class="note">
Only <em>Import data</em> is mandatory.
</div>
<img src="images/fbs_guide8.png" /></li>
<li>Leave <em>Choose schedule type</em> set to <em>Immediately</em>, then click <em>Execution</em>.
<img src="images/fbs_guide9.png" /></li>
<li>Set <em>Docker speed</em> either to <em>Fast</em> or to <em>Slow</em> depending on the expected processing time. Then, click <em>Run plugin</em>.
<div class="tip">
You can get an idea of the expected processing time by inspecting similar runs in the <em>FBS Consolidated Logs</em> SWS datatable.
</div>
<img src="images/fbs_guide10.png" /></li>
<li>Once launched, a confirmation pop-up message will indicate the plugin has started successfully. An email notification will be sent when the process completes.
<div class="tip">
You can use the Task Manager to control the plugin’s execution.
</div>
<img src="images/fbs_guide11.png" /></li>
<li>Upon successful completion, click <em>Refresh data</em> to load the updated results.
<img src="images/fbs_guide12.png" /></li>
<li>If needed, use the <em>Review changes</em> tool to inspect the modifications.
<div class="note">
The <em>Review changes</em> tool is available only if the plugin has produced changes. It allows you to review and, if necessary, discard any unintended modifications.
</div>
<img src="images/fbs_guide13.png" /></li>
<li>If there are changes you want to retain, click <em>Save changes to dataset</em>.
<div class="tip">
The sooner you save, the lower the risk of conflicts with subsequent runs.
</div>
<img src="images/fbs_guide14.png" /></li>
</ol>
</div>
<div id="usage-examples-for-the-parameters" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Usage examples for the parameters<a href="#usage-examples-for-the-parameters" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>explain what’s the difference between Complete-dataset runs and Query-based runs</p>
<div id="complete-dataset-runs" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Complete-dataset runs<a href="#complete-dataset-runs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Minimalistic</p>
<p>Fully-specified runs</p>
<p>e.g. Run from FBS Consolidated and update both output datasets with all NFISS data from 2020 to 2022.</p>
</div>
<div id="query-based-runs" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Query-based runs<a href="#query-based-runs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Minimalistic</p>
<p>e.g. Run from FBS Consolidated and update it with CLFS data specified by the selected key combination.</p>
<p>Fully-specified runs</p>
</div>
</div>
<div id="best-practices" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Best practices<a href="#best-practices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following is a list of best practices to ensure a smooth FBS consolidation process.</p>
<ul>
<li>Regurarly check the <em>FBS Consolidated Logs</em> datatable when using the plugin, especially before starting new runs. If there are recent runs, reach out to the team that launched the plugin lately to confirm whether the results were saved to the output dataset(s). This helps minimize the risk of conflicting sessions.</li>
<li>When launching the plugin, consider strategies to reduce computational time. For example, you can run the plugin with single years and/or with a limited query.</li>
<li>Create a dummy session for each output dataset and select them consistently, except when <em>Update both output datasets</em> is set to <em>Yes</em>. In this case, select the dummy session for “this” output dataset, and for the “other” output dataset, select the session where you intend to the save the data.</li>
<li>After running the plugin, use the <em>Review changes</em> tool to focus only on the updated data points.</li>
<li>If there are changes you wish to retain, click on <em>Save changes to dataset</em>. The sooner you save changes, the lower the risk of conflicts during other runs.</li>
<li>Using blank cells to indicate null quantities should be avoided, as this can lead to misunderstandings or inconsistencies in the data.</li>
<li>Instead of removing previously existing values, it is preferable to replace them with zero-valued observations and use appropriate flags to explain the reason for the change.</li>
<li>Any changes to the process - such as modifying exceptions or other computational rules - should be formally requested by email, copying all stakeholders (focal point and team leaders of the three teams). Such changes will only be implemented after receiving approval from all teams.</li>
</ul>
</div>
</div>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/SWS-Methodology/faoswsFbsConsolidationDocumentation/tree/main%s",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/SWS-Methodology/faoswsFbsConsolidationDocumentation/tree/main%s",
"text": null
},
"download": null,
"search": false,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
